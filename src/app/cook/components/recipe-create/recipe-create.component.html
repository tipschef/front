<h2>Ajouter une recette</h2>
<mat-horizontal-stepper [linear]="true" #stepper >
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Informations générale</ng-template>
      <div class="center">Bienvenu sur le formulaire d'ajout de recette de TipsChef. <br> Suivez les différents étapes, saisissez les informations nécessaires à votre recette et visualisez-la en ligne.</div>

      <mat-form-field>
        <mat-label>Tier d'accès : </mat-label>
        <input matInput placeholder="Saisissez le tier minimum pour accès" formControlName="min_tier" required type="number" min="0">
      </mat-form-field>
      <mat-form-field>
        <mat-label>Nom : </mat-label>
        <input matInput placeholder="Saisissez un nom de recette" formControlName="name" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Description : </mat-label>
        <input matInput placeholder="Saisissez un nom de recette" formControlName="description" required>
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="secondFormGroup">
    <form [formGroup]="secondFormGroup">
      <ng-template matStepLabel>Informations de la recette</ng-template>
      <div class="center">Ces précisions aideront les autres utilisateurs à trouver votre recette en fonction de leurs attentes et leurs goûts</div>

      <div>Catégorie de plat</div>
      <mat-form-field appearance="fill">
        <mat-select formControlName="recipe_category_id">
          <mat-option *ngFor="let recipeCategory of recipeCategories" [value]="recipeCategory.id">
            {{recipeCategory.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div>Portions </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Nombre : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="portion_number">
      </mat-form-field>

      <mat-form-field appearance="fill" class="inline-block">
        <mat-label>Portion : </mat-label>
        <input matInput placeholder="Personne, pièce, litre ..." formControlName="portion_unit">
      </mat-form-field>

      <div>Temps de préparation </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Heure : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="preparation_hours">
      </mat-form-field>
      <div class="inline-block"> : </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Minutes : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="preparation_minutes">
      </mat-form-field>

      <div>Temps de cuisson </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Heure : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="cooking_hours">
      </mat-form-field>
      <div class="inline-block"> : </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Minutes : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="cooking_minutes">
      </mat-form-field>

      <div>Temps de repos </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Heure : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="resting_hours">
      </mat-form-field>
      <div class="inline-block"> : </div>
      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Minutes : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="resting_minutes">
      </mat-form-field>

      <div>Type de cuisson </div>
      <mat-form-field appearance="fill">
        <mat-select formControlName="recipe_cooking_type_id">
          <mat-option *ngFor="let recipeCookingType of recipeCookingTypes" [value]="recipeCookingType.id">
            {{recipeCookingType.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div>Difficulté </div>
      <mat-form-field appearance="fill">
        <mat-select formControlName="difficulty">
          <mat-option *ngFor="let value of counter(5)" [value]="value">
            {{value}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div>Coût </div>
      <mat-form-field appearance="fill">
        <mat-select formControlName="cost">
          <mat-option *ngFor="let value of counter(5)" [value]="value">
            {{value}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div>
        <img *ngFor="let media of medias; index as i" class="margin-right" style="height:100px; width:100px" src="{{media.path}}" (click)="removeMedias(i)">
      </div>

      <input class="hidden" id="input-file-id" type="file" (change)="addMedias($event)"/>
      <label for="input-file-id" class="mat-primary mat-raised-button">Ajouter des médias</label>

      <div>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Ingrédients et étapes</ng-template>
    <div>Ingredients </div>
    <form *ngFor="let ingredient of ingredients; index as i" [formGroup]="ingredient">

      <mat-form-field appearance="fill"  class="inline-block">
        <mat-label>Quantité : </mat-label>
        <input matInput placeholder="XX"  required type="number" min="0" formControlName="quantity">
      </mat-form-field>

      <div class="inline-block">  &nbsp; </div>
      <mat-form-field appearance="fill" class="inline-block">
        <mat-label>Unité : </mat-label>
        <input matInput placeholder="Litre, gramme, cuillère ..." formControlName="ingredient_unit">
      </mat-form-field>

      <div class="inline-block">  &nbsp; </div>
      <mat-form-field appearance="fill" class="inline-block">
        <mat-label>Ingrédient : </mat-label>
        <input matInput placeholder="Pomme, farine, boeuf ..." formControlName="ingredient_name">
      </mat-form-field>

      <button class="mat-warn mat-raised-button inline-block" *ngIf="ingredients.length > 1" (click)="deleteIngredient(i)">Supprimer ingrédient</button>
    </form>
    <button class="mat-primary mat-raised-button" (click)="addIngredient()">Ajouter un ingredient</button>

    <br>
    <div>Étapes </div>
    <form *ngFor="let step of steps; index as i" [formGroup]="step">

      <div class="inline-block">  &nbsp; </div>
      <mat-form-field appearance="fill" class="inline-block">
        <mat-label>Contenu : </mat-label>
        <input matInput placeholder="Préchauffer le four à 210°..." formControlName="content">
      </mat-form-field>

      <button class="mat-warn mat-raised-button inline-block" *ngIf="steps.length > 1" (click)="deleteStep(i)">Supprimer étape</button>
    </form>
    <button class="mat-primary mat-raised-button" (click)="addStep()">Ajouter une étape</button>
    <div>
      <button mat-button matStepperNext>Suivant</button>
    </div>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <p>Vous êtes arrivé à la fin de la création de votre recette. Vérifiez les informations saisies et vous pouvez procéder à la création.</p>
    <div>
      <button mat-button (click)="createRecipe()">Créer</button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
